(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{7711:(r,e,t)=>{Promise.resolve().then(t.bind(t,9054))},9054:(r,e,t)=>{"use strict";t.d(e,{default:()=>E});var o=t(5155),n=t(2115),s=t(2651);let l=(0,n.createContext)({chatHistory:[{time:-1,prompt:"",response:""}],isLoadingResponse:!1,submitPrompt:()=>{}});function a(r){let{children:e}=r,[t,a]=(0,n.useState)([]),[i,c]=(0,n.useState)(!1),[d,x]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{s.A.post("".concat("http://localhost:4000","/chat/retrieve"),{},{withCredentials:!0}).then(r=>{var e;return 200!==r.status?console.log(r.data):a((null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.chatHistory)||[])}).catch(r=>{if(403!==r.status&&401!==r.status)return console.log(r);alert("You are not logged in"),window.location.href="/login"})},[]),(0,n.useEffect)(()=>{x(!0)},[]),!d)return null;let u=async r=>{try{c(!0);let e=await s.A.post("".concat("http://localhost:4000","/chat"),{prompt:r},{withCredentials:!0}),t={time:e.data.time,prompt:e.data.prompt,response:e.data.response};a(r=>[...r,t]),c(!1)}catch(r){if(s.A.isAxiosError(r)){var e,t;console.error((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Error connecting to Gemini"),c(!1)}else console.error("Uncaught error:",r)}};return(0,o.jsx)(l.Provider,{value:{chatHistory:t,isLoadingResponse:i,submitPrompt:u},children:e})}var i=t(8998),c=t(4665),d=t(2479),x=t(810),u=t(2282),h=t(5140),p=t(3692);let g=()=>{let{chatHistory:r}=(0,n.useContext)(l),[e,t]=(0,n.useState)(!0),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{s.current&&e&&(s.current.scrollTop=s.current.scrollHeight)},[r,e]),(0,o.jsxs)(i.A,{ref:s,sx:{width:"100%",overflowY:"auto",border:"1px solid #aaa",height:"calc(100vh - 148px)",padding:"16px",borderRadius:"10px"},onScroll:()=>{if(s.current){let{scrollTop:r,scrollHeight:e,clientHeight:o}=s.current;t(r+o===e)}},children:[r.map((r,e)=>(0,o.jsxs)(i.A,{children:[(0,o.jsx)(c.A,{sx:{maxWidth:"75%",right:"0px",marginLeft:"auto",marginBottom:"16px",backgroundColor:"rgba(100,150,255,0.55)",boxShadow:"4px 4px 4px rgba(30,30,30,0.1)",borderRadius:"10px"},children:(0,o.jsx)(d.A,{children:(0,o.jsx)(x.A,{children:r.prompt})})}),(0,o.jsx)(c.A,{sx:{maxWidth:"75%",left:"0px",marginBottom:"16px",backgroundColor:"rgba(255,255,255,0.25)",boxShadow:"4px 4px 4px rgba(30,30,30,.1)",borderRadius:"10px"},children:(0,o.jsx)(d.A,{children:(0,o.jsx)(p.jg,{children:r.response})})})]},e)),!e&&(0,o.jsx)(u.A,{variant:"contained",sx:{position:"absolute",bottom:"128px",left:"50%",transform:"translate(0,50%)",borderRadius:"15px",backgroundColor:"rgb(100,150,255)"},onClick:()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight),t(!0)},children:(0,o.jsx)(h.A,{})})]})};var b=t(6046),j=t(7293),A=t(6056),f=t(1118);let v=()=>{let r=(0,b.useRouter)(),[e,t]=(0,n.useState)(null);return(0,o.jsxs)(u.A,{variant:"contained",sx:{position:"absolute",top:"32px",left:"32px",width:"36px",backgroundColor:"rgb(100,150,255)"},onClick:r=>t(e?null:r.currentTarget),children:[(0,o.jsx)(f.A,{}),(0,o.jsx)(j.A,{anchorEl:e,open:!!e,onClose:()=>t(null),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,o.jsx)(A.A,{sx:{color:"red"},onClick:()=>(t(null),s.A.post("".concat("http://localhost:4000","/user/logout"),{},{withCredentials:!0}),r.push("/login")),children:"Logout"})})]})};var m=t(6036),C=t(1368),k=t(6854),w=t(4323);let S=()=>{let[r,e]=(0,n.useState)(""),{isLoadingResponse:t,submitPrompt:s}=(0,n.useContext)(l);return(0,o.jsxs)(m.A,{container:!0,sx:{marginTop:"16px"},children:[(0,o.jsx)(m.A,{size:11,children:(0,o.jsx)(C.A,{fullWidth:!0,disabled:t,value:r,onChange:r=>e(r.target.value)})}),(0,o.jsx)(m.A,{size:1,children:(0,o.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{height:"56px",backgroundColor:"rgb(100,150,255)"},disabled:t,onClick:()=>{s(r),e("")},children:t?(0,o.jsx)(k.A,{}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(w.A,{sx:{marginLeft:"8px"}})})})})]})},E=()=>(0,o.jsx)(a,{children:(0,o.jsx)(c.A,{sx:{margin:"16px",border:"1px solid white",backgroundColor:"rgba(255,255,255,0.55)",backdropFilter:"blur(50px)",boxShadow:"4px 4px 4px rgba(30,30,30,0.1)",borderRadius:"10px"},children:(0,o.jsxs)(d.A,{children:[(0,o.jsx)(v,{}),(0,o.jsx)(g,{}),(0,o.jsx)(S,{})]})})})}},r=>{var e=e=>r(r.s=e);r.O(0,[88,4,441,517,358],()=>e(7711)),_N_E=r.O()}]);